(this.webpackJsonpchatter=this.webpackJsonpchatter||[]).push([[14],{50:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var s=a(38),i=a(36),n=a(33),r=a(34),u=a(39),c=a(43),o=a(31),h=a(37),l=function(){function e(){Object(n.a)(this,e),this.database=void 0,this.auth=void 0,this.database=h.a.database(),this.auth=h.a.auth()}return Object(r.a)(e,[{key:"getUserChatRef",value:function(){return this.database.ref().child("userchats")}},{key:"getGroupChatRef",value:function(){return this.database.ref().child("/groupchats")}},{key:"getMessagePathToFriend",value:function(e){var t,a=(null===(t=this.auth.currentUser)||void 0===t?void 0:t.email)||"";return this.getUserChatRef().child(Object(o.b)(a,e)).child("/messages/")}},{key:"getMessageMetaDataPath",value:function(e){var t,a=(null===(t=this.auth.currentUser)||void 0===t?void 0:t.email)||"";return this.getUserChatRef().child(Object(o.b)(a,e)).child("/metaData/")}},{key:"getGroupPath",value:function(e){return this.getGroupChatRef().child(e).child("/messages/")}},{key:"getMessageMetaDataPathForGroup",value:function(e){return this.getGroupChatRef().child(e).child("/metaData/")}},{key:"getMessagesOnce",value:function(e,t){return this.getMessagePathToFriend(e).on(c.c,(function(a){return t(a,e)}),(function(e){}))}},{key:"getMessagesForGroup",value:function(e,t){this.getGroupPath(e).on("value",(function(a){return t(a,e)}))}},{key:"sendMessage",value:function(e,t){var a,n=(null===(a=this.auth.currentUser)||void 0===a?void 0:a.email)||"";return this.getMessagePathToFriend(e).update(Object(s.a)({},t.timestamp,Object(i.a)(Object(i.a)({},t),{},{from:n})))}},{key:"sendMessageToGroup",value:function(e,t){var a,n=(null===(a=this.auth.currentUser)||void 0===a?void 0:a.email)||"";return this.getGroupPath(e).update(Object(s.a)({},t.timestamp,Object(i.a)(Object(i.a)({},t),{},{from:n})))}},{key:"getLastMessage",value:function(e,t){return this.getMessagePathToFriend(e).orderByValue().limitToLast(1).on("value",(function(a){return t(e,a)}))}},{key:"getLastMessageOfGroup",value:function(e,t){return this.getGroupPath(e).orderByValue().limitToLast(1).on("value",(function(a){return t(e,a)}))}},{key:"getLastReadTime",value:function(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.h,s=Object(o.c)((null===(t=this.auth.currentUser)||void 0===t?void 0:t.email)||"");return a===u.h?this.getMessageMetaDataPath(e).child("lastMessageReadTime").child(s).get():a===u.c?this.getMessageMetaDataPathForGroup(e).child("lastMessageReadTime").child(s).get():void 0}},{key:"setLastReadTime",value:function(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.h,s=Object(o.c)((null===(t=this.auth.currentUser)||void 0===t?void 0:t.email)||"");return a===u.h?this.getMessageMetaDataPath(e).child("lastMessageReadTime").child(s).set((new Date).getTime()):a===u.c?this.getMessageMetaDataPathForGroup(e).child("lastMessageReadTime").child(s).set((new Date).getTime()):void 0}}]),e}()},63:function(e,t,a){},74:function(e,t,a){"use strict";a.r(t);var s=a(75),i=a(42),n=a(0),r=a(50),u=(a(63),a(3));t.default=function(e){var t=e.activeUser,a=e.activeGroup,c=Object(n.useRef)(null),o=function(){var e=null===c||void 0===c?void 0:c.current;!function(e){var s=new r.a,i={from:"",message:e,timestamp:(new Date).getTime()};""!==e&&void 0!==e&&null!==e&&(t&&s.sendMessage((null===t||void 0===t?void 0:t.email)||"",i).then().catch(),a&&s.sendMessageToGroup(a.id,i).then().catch())}(e&&e.value),e&&(e.value="")};return Object(u.jsx)("div",{className:"messageInputWrapper",children:Object(u.jsxs)("div",{className:"inputWrapper",children:[Object(u.jsx)("input",{type:"text",placeholder:"Type your message here....",ref:c,onKeyPress:function(e){"Enter"===e.key&&o()}}),Object(u.jsx)("span",{className:"sendicon",role:"button",onClick:o,children:Object(u.jsx)(i.a,{icon:s.a})})]})})}}}]);
//# sourceMappingURL=14.aab3f7ef.chunk.js.map